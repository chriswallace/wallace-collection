import{s as C,n as k,o as I}from"../chunks/scheduler.e108d1fd.js";import{S as L,i as S,g as w,s as v,z as T,h as x,f as h,c as _,j as $,x as y,k as p,y as m,a as b}from"../chunks/index.bad58c3a.js";const W=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;let A;function q(){typeof window>"u"||(A=new IntersectionObserver((n,o)=>{n.forEach(t=>{if(t.isIntersecting){const e=t.target;D(e),H(e),o.unobserve(e)}})},{rootMargin:"0px 0px 200px 0px"}))}const D=n=>{const o=n.getAttribute("data-video");if(o){const t=document.createElement("video");t.src=o,t.style.objectFit="cover",t.setAttribute("playsinline",""),t.setAttribute("muted",""),t.playbackRate=1,t.addEventListener("ended",()=>t.pause());const e=n.closest(".image-wrapper");e&&(n.replaceWith(t),e.addEventListener("transitionend",()=>{t.play()}))}},H=n=>{const o=n.clientWidth,t="https://ik.imagekit.io/UltraDAO/wallace_collection/",e=n.src.split("/").pop().split("?")[0],i=n.getAttribute("data-max-width");if(i&&i<=o)n.src=`${t}${e}?tr=q-70`;else{let c=o,d=o*2,r=o*3,l=o*4;i&&(c=Math.min(i,c),d=Math.min(i,d),r=Math.min(i,r),l=Math.min(i,l));const s=`${t}${e}?tr=w-${c},q-70 1x,
                            ${t}${e}?tr=w-${d},q-70 2x,
                            ${t}${e}?tr=w-${r},q-70 3x`,a=`(max-width: 400px) ${c}px,
                        (max-width: 800px) ${d}px,
                        (max-width: 1200px) ${r}px,
                        ${l}px`;n.src=`${t}${e}?tr=w-${c},q-70`,n.srcset=s,n.sizes=a}n.classList.add("loaded")};function j(){return/Mobi|Android/i.test(navigator.userAgent)}function O(n,o){if(typeof window>"u"||n.getAttribute("data-processed")==="true")return;A.observe(n);const t=document.createElement("div");if(t.classList.add("image-wrapper"),n.parentNode.insertBefore(t,n),t.appendChild(n),document.createElement("div").classList.add("maximize-icon"),j()&&n.alt.trim().length){const i=document.createElement("caption");i.innerHTML=n.alt,t.appendChild(i)}n.setAttribute("data-processed","true")}const{document:g}=W;function M(n){let o,t="Loading more images...";return{c(){o=w("p"),o.textContent=t},l(e){o=x(e,"P",{"data-svelte-h":!0}),y(o)!=="svelte-1jbx6ez"&&(o.textContent=t)},m(e,i){b(e,o,i)},d(e){e&&h(o)}}}function P(n){let o,t,e,i,c=`The Wallace Collection contains over 6,000 digital artworks from a wide range of international
		artists.`,d,r,l,s=n[0]&&M();return{c(){o=w("meta"),t=v(),e=w("main"),i=w("h1"),i.textContent=c,d=v(),r=w("div"),l=v(),s&&s.c(),this.h()},l(a){const f=T("svelte-ra558w",g.head);o=x(f,"META",{name:!0,content:!0}),f.forEach(h),t=_(a),e=x(a,"MAIN",{class:!0});var u=$(e);i=x(u,"H1",{class:!0,"data-svelte-h":!0}),y(i)!=="svelte-t0gx0m"&&(i.textContent=c),d=_(u),r=x(u,"DIV",{id:!0}),$(r).forEach(h),l=_(u),s&&s.l(u),u.forEach(h),this.h()},h(){g.title="The Wallace Collection",p(o,"name","description"),p(o,"content","The Wallace Collection contains over 6,000 digital artworks from a wide range of international artists."),p(i,"class","main-title svelte-bcf3s1"),p(r,"id","art-collection"),p(e,"class","svelte-bcf3s1")},m(a,f){m(g.head,o),b(a,t,f),b(a,e,f),m(e,i),m(e,d),m(e,r),m(e,l),s&&s.m(e,null)},p(a,[f]){a[0]?s||(s=M(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:k,o:k,d(a){a&&(h(t),h(e)),h(o),s&&s.d()}}}function R(n){let o=Math.sin(n++)*1e4;return o-Math.floor(o)}function U(n,o){let t=n.length,e;for(;t!==0;)e=Math.floor(R(o)*t),t--,[n[t],n[e]]=[n[e],n[t]];return n}function B(n,o,t){let e=!1,i=["chunk0","chunk1","chunk2","chunk3","chunk4","chunk5","chunk6","chunk7","chunk8","chunk9","chunk10"],c=0;async function d(){if(typeof window>"u"||e||i.length===0)return;const l=Math.floor(new Date().getTime()/(60*60*1e3));U(i,l);const s=i.shift();t(0,e=!0);try{const f=await(await fetch(`/collection/${s}.html`)).text(),u=document.getElementById("art-collection");u.insertAdjacentHTML("beforeend",f),u.querySelectorAll("img").forEach((E,z)=>O(E,z)),t(0,e=!1)}catch(a){console.error("Fetch failed:",a),t(0,e=!1)}}function r(){if(typeof window>"u")return;const l=Date.now();l-c>200&&(window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&d(),c=l)}return I(()=>(q(),d(),window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r))),[e]}class Y extends L{constructor(o){super(),S(this,o,B,P,C,{})}}export{Y as component};
